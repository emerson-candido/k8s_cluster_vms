---
- hosts: "{{ node_prefix }}-{{ node_count }}"
  become: true
  gather_facts: yes
  tasks:
  - name: Install master and worker packages
    include_role:
      name: master_and_workers
      tasks_from: setup
  
  - name: Worker Join
    include_role:
      name: worker
      tasks_from: worker_join

- name: Install APPs
  ansible.builtin.import_playbook: apps.yml
  when: node_numbers == node_count